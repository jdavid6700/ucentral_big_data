{% extends "base.html" %}

{% block content %}

<h3 class="fw-bold mb-4">Buscar Providencias por Tipo</h3>

<form method="POST" class="card card-custom p-4 mb-4">

    <label class="form-label fw-semibold">Seleccione un tipo</label>

    <select class="form-control search-box" name="tipo">
        <option>Constitucionalidad</option>
        <option>Auto</option>
        <option>Tutela</option>
    </select>

    <button class="btn btn-dark mt-3 w-100">
        <i class="fa-solid fa-layer-group"></i> Buscar
    </button>

</form>

{% if buscado %}
    {% if resultados %}
    <div class="card card-custom p-4 shadow-sm">

        <h5 class="fw-semibold mb-3">Resultados</h5>

        <table id="tablaTipo" class="table table-striped align-middle">
            <thead>
                <tr>
                    <th>Providencia</th>
                    <th>Tipo</th>
                    <th>Año</th>
                    <th>Texto (200 chars)</th>
                    <th>Acciones</th>
                </tr>
            </thead>
            <tbody>

            {% for r in resultados %}
                <tr>
                    <td class="fw-bold">{{ r["providencia"] }}</td>
                    <td>{{ r["tipo"] }}</td>
                    <td>{{ r["anio"] }}</td>
                    <td>{{ r["texto"][:200] }}...</td>

                    <td>
                        <a class="btn btn-outline-primary btn-sm"
                        href="/detalle/{{ r['providencia'] }}/0">
                            Ver más
                        </a>
                    </td>
                </tr>
            {% endfor %}

            </tbody>
        </table>

    </div>
    {% else %}
        {% include 'no_results.html' %}
    {% endif %}
{% endif %}

{% endblock %}


{% block scripts %}
<script>
$(document).ready(function() {

    $('#tablaTipo').DataTable({
        "order": [[0, "asc"]],
        "pageLength": 10,
        "lengthChange": false,
        "language": {
            "search": "Buscar:",
            "zeroRecords": "No se encontraron resultados",
            "info": "Mostrando _START_ a _END_ de _TOTAL_ registros",
            "paginate": {
                "previous": "Anterior",
                "next": "Siguiente"
            }
        }
    });

});
</script>
{% endblock %}
