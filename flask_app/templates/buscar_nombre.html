{% extends "base.html" %}

{% block content %}

<h3 class="fw-bold mb-4">Buscar Providencia por Nombre</h3>

<form method="POST" class="card card-custom p-4 mb-4">

    <input class="form-control search-box"
           name="nombre"
           placeholder="Ej: C-411-22">

    <button class="btn btn-dark mt-3 w-100">
        <i class="fa-solid fa-search"></i> Buscar
    </button>
</form>



{% if buscado %}
    {% if resultado %}
    <div class="card card-custom p-4 shadow-sm">

        <h5 class="fw-semibold mb-3">Resultado</h5>
    
        <table id="tablaNombre" class="table table-striped align-middle">
            <thead>
                <tr>
                    <th>Providencia</th>
                    <th>Tipo</th>
                    <th>Año</th>
                    <th>Texto (500 chars)</th>
                    <th>Acciones</th>
                </tr>
            </thead>
    
            <tbody>
    
                <tr>
                    <td class="fw-bold">{{ resultado["providencia"] }}</td>
                    <td>{{ resultado["tipo"] }}</td>
                    <td>{{ resultado["anio"] }}</td>
                    <td>{{ resultado["texto"][:500] }}...</td>
    
                    <td>
                        <a class="btn btn-outline-primary btn-sm"
                           href="/detalle/{{ resultado['providencia'] }}/0">
                            Ver más
                        </a>
                    </td>
                </tr>
    
            </tbody>
    
        </table>
    
    </div>
    {% else %}
        {% include 'no_results.html' %}
    {% endif %}
{% endif %}

{% endblock %}

{% block scripts %}
<script>
$(document).ready(function() {

    $('#tablaNombre').DataTable({
        "order": [[0, "asc"]],
        "paging": false,  // Es 1 sola fila, no vale paginar
        "searching": false,
        "info": false,
    });

});
</script>
{% endblock %}
